var Je=Object.defineProperty,Qe=Object.defineProperties;var Ye=Object.getOwnPropertyDescriptors;var Se=Object.getOwnPropertySymbols;var Ze=Object.prototype.hasOwnProperty,Xe=Object.prototype.propertyIsEnumerable;var we=(n,t,o)=>t in n?Je(n,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[t]=o,S=(n,t)=>{for(var o in t||(t={}))Ze.call(t,o)&&we(n,o,t[o]);if(Se)for(var o of Se(t))Xe.call(t,o)&&we(n,o,t[o]);return n},w=(n,t)=>Qe(n,Ye(t));import{i as et,g as tt,O as nt,b as te,w as ot,a as R,v as M,_ as Te,m as ve,c as De,r as i,o as at,M as Ie,B as Pe,y as je,j as e,s as st,d as rt,e as lt,f as it,T as ct,h as f,u as T,k as l,P as ne,l as oe,F as ae,n as se,p as re,q,t as le,C as dt,x as ie,z as ut,A as pt,D as _,E as ce,G as V,H as de,I as G,J as K,K as z,L as P,N as J,Q as y,R as ue,S as U,U as ht,V as mt,W as pe,X as he,Y as Q,Z as me,$ as gt,a0 as Ct,a1 as A,a2 as $,a3 as Y,a4 as j,a5 as ft,a6 as xt,a7 as bt,a8 as yt,a9 as kt,aa as H,ab as St,ac as wt,ad as Tt,ae as vt,af as Dt,ag as It,ah as Pt,ai as jt,aj as He,ak as N,al as ge,am as Ce,an as fe,ao as xe,ap as Oe,aq as ze,ar as Ae,as as Ht,at as Ot,au as zt,av as At,aw as Ft,ax as Nt,ay as Fe,az as Ne,aA as Et,aB as Lt,aC as Bt,aD as Rt,aE as Mt,aF as qt,aG as Ut,aH as Ee,aI as Le,aJ as $t,aK as Wt,aL as _t,aM as F,aN as Vt,aO as Gt,aP as Kt,aQ as Jt}from"./vendor.c5db7a51.js";const Qt=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function o(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(s){if(s.ep)return;s.ep=!0;const r=o(s);fetch(s.href,r)}};Qt();const Yt={apiKey:"AIzaSyCPiNcvNkZJp9dPKs3B12--TcdLPICI5Wc",authDomain:"todoist-clone-a2075.firebaseapp.com",projectId:"todoist-clone-a2075",storageBucket:"todoist-clone-a2075.appspot.com",messagingSenderId:"897620374690",appId:"1:897620374690:web:6a7c290ec46fc18eb7d3fb"};et(Yt);const W=tt(),O=nt(),Be=te(O,"tasks"),Re=te(O,"projects");te(O,"users");const Me=async({taskName:n,projectId:t,userId:o,due:a})=>{await De(Be,{taskName:n,projectId:t,userId:o,due:a,completed:!1,timestamp:R()})},qe=(n,t)=>Te(M(O,"tasks",n),w(S({},t),{timestamp:R()})),Zt=n=>ve(M(O,"tasks",n)),Xt=async({name:n,userId:t,color:o})=>{await De(Re,{name:n,userId:t,color:o,timestamp:R()})},Ue=(n,t)=>Te(M(O,"projects",n),w(S({},t),{timestamp:R()})),en=n=>ve(M(O,"projects",n)),tn=(n,t)=>ot(M(O,"users",n),w(S({},t),{createdAt:R()})),b=i.exports.createContext({user:null,projects:[],tasks:[],showCompletedTasks:!1,toggleCompletedTasks:()=>{}}),nn=({children:n})=>{const[t,o]=i.exports.useState(null),[a,s]=i.exports.useState([]),[r,c]=i.exports.useState([]),[d,p]=i.exports.useState(!1);i.exports.useEffect(()=>{const h=at(W,C=>{o(C)});return()=>h()},[]),i.exports.useEffect(()=>{if(!t)return;const h=Ie(Be,Pe("userId","==",`${t.uid}`)),C=je(h,x=>{const g=x.docs.map(k=>{if(!!k.exists)return w(S({},k.data()),{id:k.id})});c(g)});return()=>C()},[t]),i.exports.useEffect(()=>{if(!t)return;const h=Ie(Re,Pe("userId","==",`${t.uid}`)),C=je(h,x=>{const g=x.docs.map(k=>{if(!!k.exists)return w(S({},k.data()),{id:k.id})});s(g.length===0?[]:g)});return()=>C()},[t]);const u={user:t,tasks:r,projects:a,showCompletedTasks:d,toggleCompletedTasks:()=>{p(!d)}};return e(b.Provider,{value:u,children:n})},on=(n,t)=>lt(W,n,t),an=(n,t)=>st(W,n,t),sn=()=>rt(W),rn=()=>it(W),be=({children:n,tooltipLabel:t})=>e(ct,{label:t,children:n}),v=({btnType:n,text:t,isDisabled:o,onClick:a})=>e(f,w(S({},{bg:n==="primary"?"red.400":"gray.100",color:n==="primary"?"white":"black"}),{onClick:a,isDisabled:o,variant:n==="secondary"?"outline":"solid",size:"sm",children:t})),ye=({projectId:n,onSelectProject:t})=>{var u;const{projects:o}=i.exports.useContext(b),a=o.find(h=>h.id===n),[s,r]=i.exports.useState((u=a==null?void 0:a.name)!=null?u:""),{isOpen:c,onClose:d,onToggle:p}=T(),m=h=>{var C,x;d(),h.target instanceof HTMLButtonElement&&(r((C=h.target.dataset.name)!=null?C:""),t((x=h.target.dataset.id)!=null?x:""))};return l(ne,{isLazy:!0,closeOnBlur:!0,isOpen:c,onClose:d,children:[e(oe,{children:e(f,{leftIcon:s===""?e(ae,{}):void 0,variant:"outline",size:"sm",onClick:p,children:s===""?"Inbox":s})}),e(se,{w:"max",_focus:{border:"1px",borderColor:"gray.300"},boxShadow:"md",children:l(re,{display:"flex",flexDir:"column",children:[e(f,{leftIcon:e(ae,{}),"data-id":"","data-name":"Inbox",onClick:m,variant:"ghost",size:"sm",justifyContent:"flex-start",children:"Inbox"}),o.map(h=>l(f,{"data-id":h.id,"data-name":h.name,onClick:m,variant:"ghost",size:"sm",justifyContent:"flex-start",children:[e(q,{as:"span",w:"7px",h:"7px",bg:h.color,borderRadius:"50%",mr:2}),h.name]},`${h.name}${Math.random()}`))]})})]})};const E=({icon:n,onClick:t,text:o})=>e(f,{leftIcon:n,onClick:t,variant:"ghost",justifyContent:"flex-start",size:"sm",children:o}),$e=1e3*60*60*24,Z=n=>new Date(n).getTime(),We=n=>{let t;return typeof n=="string"&&(t=n),n instanceof Date&&(t=n.toDateString()),t===void 0?"":t===new Date(Date.now()-$e).toDateString()?"Yesterday":t===new Date().toDateString()?"Today":t===new Date(Date.now()+$e).toDateString()?"Tomorrow":t.split(" ").slice(1,3).join(" ")},ke=({onSelectDate:n,initialDate:t=""})=>{ie(["bottom","left"]);const[o,a]=i.exports.useState(()=>t===""?null:new Date(t)),{isOpen:s,onClose:r,onToggle:c}=T(),d=We(o!=null?o:""),p=u=>{r(),a(u),n(u.toDateString())},m=()=>{r(),a(null),n("")};return l(ne,{isLazy:!0,closeOnBlur:!0,placement:"auto-end",isOpen:s,onClose:r,children:[e(oe,{children:e(f,{leftIcon:e(ut,{}),variant:"outline",size:"sm",onClick:c,children:o===null?"Schedule":d})}),e(se,{w:"max",_focus:{border:"1px",borderColor:"gray.300"},boxShadow:"md",children:l(re,{display:"flex",flexDir:"column",children:[e(ln,{minDate:new Date,value:o,prev2Label:null,next2Label:null,onChange:p}),e(E,{text:"No Date",onClick:m,icon:e(pt,{})})]})})]})},ln=le(dt)`
  border: none;
  font-size: 0.8rem;
  width: 225px;
`,cn=({isOpen:n,onClose:t})=>{const o=ie(["xs","md"]),{projectId:a}=_(),{user:s}=i.exports.useContext(b),[r,c]=i.exports.useState(""),[d,p]=i.exports.useState(""),[m,u]=i.exports.useState(a!=null?a:""),h=D=>{c(D.target.value)},C=()=>{t(),c("")},x=D=>{p(D)},g=D=>{u(D)},k=async()=>{t(),c("");try{await Me({taskName:r,projectId:m,userId:s.uid,due:d})}catch(D){console.log(D)}};return l(ce,{isOpen:n,onClose:C,isCentered:!0,size:o,children:[e(V,{}),l(de,{children:[e(G,{children:"New Task"}),l(K,{children:[e(z,{placeholder:"Task name",onChange:h,value:r,mb:4}),l(P,{spacing:2,children:[e(ke,{onSelectDate:x}),e(ye,{projectId:a!=null?a:"",onSelectProject:g})]})]}),e(J,{children:l(P,{spacing:4,children:[e(v,{btnType:"primary",text:"Add task",onClick:k,isDisabled:r===""}),e(v,{btnType:"secondary",text:"Cancel",onClick:C})]})})]})]})},dn=({onToggle:n,isSidebarOpen:t})=>{var d;const{isOpen:o,onOpen:a,onClose:s}=T(),{user:r}=i.exports.useContext(b);return l(y,{children:[o&&e(cn,{isOpen:o,onClose:s}),l(ue,{as:"header",alignItems:"center",bg:"red.400",py:2,px:"2%",position:"absolute",zIndex:"100",width:"100%",children:[l(P,{variant:"ghost",children:[e(be,{tooltipLabel:t?"Close menu":"Open menu",children:e(U,{"aria-label":"menu",icon:e(ht,{}),color:"white",onClick:n})}),e(be,{tooltipLabel:"Go to home",children:e(U,{"aria-label":"home",icon:e(mt,{}),color:"white",to:"/app/inbox",as:pe})})]}),e(he,{}),l(Q,{spacing:"4",children:[e(be,{tooltipLabel:"Quick Add",children:e(U,{"aria-label":"plus",icon:e(me,{}),variant:"ghost",color:"white",onClick:a})}),e(f,{onClick:async()=>{await rn()},size:"sm",children:"Logout"}),e(gt,{name:(d=r&&r.email)!=null?d:"",src:"no-link",_hover:{cursor:"pointer"}})]})]})]})},un=["red","violet","teal","blue","lightblue","gray","salmon","yellow","orange","green","limegreen","skyblue","lavender","magenta"],_e=({onSelectColor:n,color:t})=>e(Ct,{onChange:a=>{n(a.target.value)},value:t,size:"sm",textTransform:"capitalize",children:un.map(a=>e("option",{value:a,children:a},a))}),pn=({isOpen:n,onClose:t})=>{const o=ie(["xs","md"]),{user:a}=i.exports.useContext(b),[s,r]=i.exports.useState(""),[c,d]=i.exports.useState("gray");return l(ce,{isOpen:n,onClose:t,isCentered:!0,size:o,children:[e(V,{}),l(de,{children:[e(G,{children:"Add project"}),l(K,{children:[l(A,{mb:4,children:[e($,{children:"Name"}),e(z,{placeholder:"Project name",value:s,onChange:h=>{r(h.target.value)},size:"sm"})]}),l(A,{children:[e($,{children:"Color"}),e(_e,{onSelectColor:h=>{d(h)},color:c})]})]}),e(J,{children:l(P,{spacing:4,mt:4,children:[e(v,{btnType:"secondary",text:"Cancel",onClick:t}),e(v,{btnType:"primary",text:"Add",onClick:async()=>{t(),r("");try{await Xt({name:s,userId:a.uid,color:c})}catch(h){console.log(h)}},isDisabled:s===""})]})})]})]})},hn=({id:n,projectName:t,projectColor:o})=>{const{tasks:a}=i.exports.useContext(b),s=a.filter(r=>r.projectId===n).reduce(r=>r+1,0);return e(Q,{as:"li",mb:1,children:l(f,{as:Y,to:`/projects/${n}`,variant:"ghost",color:"black",width:"full",justifyContent:"flex-start",children:[e(q,{w:"10px",h:"10px",bg:o,borderRadius:"50%",mr:4}),e(j,{isTruncated:!0,maxW:"15ch",fontSize:"sm",children:t}),e(q,{as:"span",ml:"auto",color:"gray.400",fontSize:"sm",children:s})]})})},mn=()=>{const{projects:n}=i.exports.useContext(b),{isOpen:t,onOpen:o,onClose:a}=T(),s=n.length===0;return l(y,{children:[e(pn,{isOpen:t,onClose:a}),e(ft,{allowToggle:!0,w:"full",mt:4,children:l(xt,{children:[e("h2",{children:l(bt,{as:"div",children:[e(yt,{mr:"2"}),e(q,{flex:"1",textAlign:"left",fontWeight:"bold",children:"Projects"}),e(U,{icon:e(me,{}),"aria-label":"plus",variant:"ghost",color:"gray.400",onClick:o})]})}),e(kt,{pb:4,as:"ul",children:s?e(j,{size:"sm",pl:4,children:"You have no project"}):n.map(r=>e(hn,{id:r.id,projectName:r.name,projectColor:r.color},r.id))})]})})]})},gn=({isOpen:n,onClose:t})=>l(y,{children:[n&&e(fn,{onClick:t}),l(Cn,{isOpen:n,children:[l(H,{pl:4,children:[e(f,{leftIcon:e(ae,{}),fontSize:"sm",as:Y,to:"/app/inbox",variant:"ghost",width:"full",justifyContent:"flex-start",children:"Inbox"}),e(f,{leftIcon:e(St,{}),fontSize:"sm",as:Y,to:"/app/today",variant:"ghost",width:"full",justifyContent:"flex-start",children:"Today"}),e(f,{leftIcon:e(wt,{}),fontSize:"sm",as:Y,to:"/app/upcoming",variant:"ghost",width:"full",justifyContent:"flex-start",children:"Upcoming"})]}),e(H,{children:e(mn,{})})]})]}),Cn=le.div`
  height: 100vh;
  width: ${({isOpen:n})=>n?"300px":"0"};
  opacity: ${({isOpen:n})=>n?"1":"0"};
  background-color: #fafaf2;
  padding-top: 5rem;
  * {
    display: ${({isOpen:n})=>n?"block":"none"};
  }
  .active {
    background-color: rgba(0, 0, 0, 0.05);
  }

  @media screen and (max-width: 769px) {
    position: absolute;
    z-index: 10;
  }
`,fn=le.div`
  @media screen and (max-width: 769px) {
    position: fixed;
    inset: 0;
    z-index: 8;
    background-color: rgba(0, 0, 0, 0.25);
  }
`,xn=({children:n})=>{const{isOpen:t,onToggle:o}=T();return l(y,{children:[e(dn,{onToggle:o,isSidebarOpen:t}),l(ue,{width:"100vw",minH:"100vh",children:[e(gn,{isOpen:t,onClose:o}),e(ue,{alignItems:"center",flexDir:"column",mx:"auto",width:"100%",children:e(Tt,{})})]})]})},L=({title:n})=>e(vt,{children:e("title",{children:n})}),B=({label:n,name:t,placeholder:o,type:a})=>{const{isOpen:s,onToggle:r}=T(),c=()=>r();return e(Dt,{name:t,children:({field:d,form:p,meta:m})=>l(A,{isInvalid:!!m.error&&!!m.touched,isRequired:!0,children:[e($,{htmlFor:t,children:n}),a==="password"?l(It,{children:[e(z,w(S({},d),{id:t,placeholder:o,type:s?"text":"password"})),e(Pt,{width:"4.5rem",children:e(f,{h:"1.75rem",size:"sm",onClick:c,variant:"ghost",children:s?"Hide":"Show"})})]}):e(z,w(S({},d),{id:t,placeholder:o,type:a})),e(jt,{children:m.error})]})})},Ve=n=>{const t=n.slice(5).replaceAll("-"," ");return t.replace(t[0],t[0].toUpperCase())},bn=He({password:N().required("Required"),email:N().email("Invalid email address").required("Required")}),yn=()=>{const n=ge();let t=Ce();const o={email:"",password:""},a=async({email:r,password:c})=>{try{await an(r,c),t("/app/inbox",{replace:!0})}catch(d){const p=Ve(d.code);n({description:p,status:"error",duration:9e3,isClosable:!0})}},s=async()=>{try{await sn(),t("/app/inbox",{replace:!0})}catch(r){alert(r)}};return l(y,{children:[e(L,{title:"Todoist Clone Firebase"}),l(fe,{centerContent:!0,display:"flex",alignItems:"center",minH:"100vh",py:100,children:[e(xe,{as:"h2",children:"Login"}),e(Oe,{initialValues:o,onSubmit:a,validationSchema:bn,children:r=>l(H,{as:ze,children:[e(B,{name:"email",label:"Email",placeholder:"example@email.com",type:"email"}),e(B,{name:"password",label:"Password",placeholder:"",type:"password"}),l(j,{pb:4,children:["Don't have an account?",e(Ae,{as:pe,to:"/signup",color:"blue",fontWeight:"500",ml:4,children:"Sign up here"})]}),l(H,{w:"full",children:[e(f,{type:"submit",isLoading:r.isSubmitting,isFullWidth:!0,colorScheme:"blue",children:"Log in"}),e(j,{fontWeight:"bold",children:"OR"}),e(f,{isLoading:r.isSubmitting,isFullWidth:!0,onClick:s,variant:"outline",children:"Log in Anonymously"})]}),l(j,{fontSize:"xs",position:"fixed",bottom:"4",right:"100px",children:["Todoist Clone by Fazza Amiarso"," "]})]})})]})]})},kn=({children:n,redirectTo:t})=>{const{user:o}=i.exports.useContext(b);return o?e(y,{children:n}):e(Ht,{to:t})},Sn=He({password:N().min(6,"Password at least 6 characters").required("Required"),email:N().email("Invalid email address").required("Required"),firstName:N().max(15).required("Required"),lastName:N().max(15).required("Required")}),wn=()=>{const n=ge();let t=Ce();return l(y,{children:[e(L,{title:"Todoist Clone Firebase"}),l(fe,{centerContent:!0,display:"flex",alignItems:"center",justifyContent:"center",minH:"100vh",py:2,pb:32,children:[e(xe,{as:"h2",pb:"8",children:"Signup"}),e(Oe,{initialValues:{email:"",password:"",firstName:"",lastName:""},onSubmit:async({email:s,password:r,firstName:c,lastName:d})=>{try{const p=await on(s,r);p.user.isAnonymous||await tn(p.user.uid,{email:s,firstName:c,lastName:d,id:p.user.uid}),t("/app/inbox",{replace:!0}),n({description:`Welcome aboard ${c}!`,status:"info",duration:9e3,isClosable:!0})}catch(p){const m=Ve(p.code);n({description:m,status:"error",duration:9e3,isClosable:!0})}},validationSchema:Sn,children:s=>l(H,{as:ze,spacing:4,children:[e(B,{name:"firstName",label:"First Name",placeholder:"John",type:"text"}),e(B,{name:"lastName",label:"Last Name",placeholder:"Doe",type:"text"}),e(B,{name:"email",label:"Email",placeholder:"example@email.com",type:"email"}),e(B,{name:"password",label:"Password",placeholder:"",type:"password"}),l(j,{children:["Already have an account?",e(Ae,{as:pe,to:"/login",color:"blue",fontWeight:"500",ml:4,children:"Login here"})]}),e(H,{w:"full",pt:4,children:e(f,{type:"submit",isLoading:s.isSubmitting,isFullWidth:!0,colorScheme:"blue",children:"Signup"})})]})})]})]})},Tn=({onCloseEditor:n})=>{const{projectId:t}=_(),{user:o}=i.exports.useContext(b),[a,s]=i.exports.useState(""),[r,c]=i.exports.useState(""),[d,p]=i.exports.useState(t!=null?t:""),m=i.exports.useRef(null);i.exports.useEffect(()=>{var g;(g=m.current)==null||g.focus()},[]);const u=g=>{s(g.target.value)},h=g=>{c(g)},C=g=>{p(g)},x=async()=>{try{await Me({taskName:a,projectId:d,userId:o.uid,due:r})}catch(g){console.log(g)}s("")};return l(A,{mt:2,children:[e(z,{placeholder:"Task name",value:a,onChange:u,ref:m}),l(P,{spacing:2,children:[e(ke,{onSelectDate:h}),e(ye,{projectId:d!=null?d:"",onSelectProject:C})]}),l(P,{mt:2,ml:4,spacing:2,children:[e(v,{btnType:"primary",text:"Add task",onClick:x,isDisabled:a===""}),e(v,{btnType:"secondary",text:"Cancel",onClick:n})]})]})},vn=()=>{const{isOpen:n,onOpen:t,onClose:o}=T();return n?e(Tn,{onCloseEditor:o}):e(f,{variant:"ghost",isFullWidth:!0,leftIcon:e(me,{}),color:"gray.400",justifyContent:"flex-start",_hover:{color:"red.400"},onClick:t,children:"Add task"})},Dn=({isOpen:n,onClose:t,onUpdateProject:o,projectId:a})=>{const{projects:s}=i.exports.useContext(b),r=s.find(g=>g.id===a),[c,d]=i.exports.useState(r.name),[p,m]=i.exports.useState(r.color),u=c===(r==null?void 0:r.name)&&p===(r==null?void 0:r.color);return l(ce,{isOpen:n,onClose:t,isCentered:!0,children:[e(V,{}),l(de,{children:[e(G,{children:"Edit project"}),l(K,{children:[l(A,{children:[e($,{children:"Name"}),e(z,{placeholder:"Project name",value:c,onChange:g=>{d(g.target.value)}})]}),l(A,{children:[e($,{children:"Color"}),e(_e,{onSelectColor:g=>{m(g)},color:p})]})]}),l(J,{children:[e(v,{btnType:"secondary",text:"Cancel",onClick:t}),e(v,{btnType:"primary",text:"Save",onClick:()=>{t(),!u&&o({name:c,color:p})},isDisabled:c===""})]})]})]})},Ge=({children:n})=>l(ne,{isLazy:!0,closeOnBlur:!0,children:[e(oe,{children:e(U,{icon:e(Ot,{}),"aria-label":"popover trigger",variant:"ghost"})}),e(se,{w:"max",_focus:{border:"1px",borderColor:"gray.300"},boxShadow:"md",children:e(re,{display:"flex",flexDir:"column",children:n})})]}),Ke=({onCloseDialog:n,isDialogOpen:t,onDeleteAction:o,deletedItemName:a})=>{const s=i.exports.useRef(null);return e(zt,{isOpen:t,leastDestructiveRef:s,onClose:n,isCentered:!0,children:e(V,{children:l(At,{children:[e(G,{children:e(Ft,{fontSize:"xl",children:e(Nt,{})})}),l(K,{children:["Are you sure you want to delete"," ",e(j,{fontWeight:"bold",as:"span",children:a}),"?"]}),l(J,{children:[e(f,{ref:s,onClick:n,variant:"outline",size:"sm",children:"Cancel"}),e(f,{colorScheme:"red",onClick:o,ml:3,size:"sm",children:"Delete"})]})]})})})},In=({onDeleteProject:n,onOpenEditor:t,projectName:o})=>{const{showCompletedTasks:a,toggleCompletedTasks:s}=i.exports.useContext(b),{isOpen:r,onOpen:c,onClose:d}=T();return l(y,{children:[l(Ge,{children:[e(E,{icon:e(Fe,{}),text:"Edit project",onClick:t}),e(E,{icon:e(Ne,{}),text:"Delete project",onClick:c}),e(E,{icon:a?e(Et,{}):e(Lt,{}),text:a?"Hide completed tasks":"Show completed tasks",onClick:()=>{s()}})]}),e(Ke,{isDialogOpen:r,onCloseDialog:d,onDeleteAction:n,deletedItemName:o})]})},Pn=()=>{const{isEditing:n,getSubmitButtonProps:t,getCancelButtonProps:o}=Ut();return n?l(P,{children:[e(f,w(S({},t()),{color:"white",bg:"red.400",size:"sm",children:"Save"})),l(f,w(S({},o()),{variant:"ghost",size:"sm",children:["Cancel"," "]}))]}):null},jn=({initialValue:n,onChangeTitle:t})=>{let o=Bt();const[a,s]=i.exports.useState(n);return i.exports.useEffect(()=>{s(n)},[o]),l(Rt,{value:a,isPreviewFocusable:!0,submitOnBlur:!1,selectAllOnFocus:!1,onSubmit:d=>{d!==n&&t(d)},onChange:d=>{s(d)},fontSize:"xl",fontWeight:"bold",mb:4,children:[e(Mt,{_hover:{background:"gray.300"}}),e(qt,{mb:2}),e(Pn,{})]})},Hn=({projectName:n,projectId:t})=>{let o=Ce();const{isOpen:a,onOpen:s,onClose:r}=T();return l(Q,{as:"header",children:[t===""?e(xe,{fontSize:"xl",mb:4,children:n}):e(jn,{initialValue:n,onChangeTitle:async m=>{await Ue(t,{name:m})}}),e(he,{}),t!==""&&e(In,{onDeleteProject:async()=>{o("/app/inbox"),await en(t)},onOpenEditor:s,projectName:n}),t!==""&&a&&e(Dn,{isOpen:a,projectName:n,projectId:t,onClose:r,onUpdateProject:async m=>{r(),await Ue(t,m)}})]})},X=({children:n,projectName:t,projectId:o})=>l(fe,{maxW:"3xl",w:"85%",mt:"5.5rem",children:[e(Hn,{projectName:t,projectId:o}),e(H,{as:"ul",alignItems:"flex-start",children:n}),e(vn,{})]}),On=({taskName:n,onDeleteTask:t,onOpenEditor:o})=>{const{isOpen:a,onOpen:s,onClose:r}=T();return l(y,{children:[l(Ge,{children:[e(E,{icon:e(Fe,{}),text:"Edit task",onClick:o}),e(E,{icon:e(Ne,{}),text:"Delete task",onClick:s})]}),e(Ke,{isDialogOpen:a,onCloseDialog:r,onDeleteAction:t,deletedItemName:n})]})},zn=({isCompleted:n,onToggleCompleted:t})=>l(q,{border:n?"none":"1px",borderColor:"gray.400",borderRadius:"50%",w:"20px",h:"20px",cursor:"pointer",mr:"2",onClick:t,children:[!n&&e(Ee,{as:Le,w:"20px",h:"20px",opacity:0,_hover:{opacity:".3",transition:"opacity .25s"}}),n&&e(Ee,{as:Le,w:"20px",h:"20px",color:"gray.500"})]}),An=({onCloseEditor:n,taskName:t,due:o,onUpdateTask:a})=>{const{projectId:s}=_(),r=i.exports.useRef(null),[c,d]=i.exports.useState(t),[p,m]=i.exports.useState(o),[u,h]=i.exports.useState(s!=null?s:""),C=c===t&&p===o&&u===s;i.exports.useEffect(()=>{var I;(I=r.current)==null||I.focus()},[]);const x=I=>{d(I.target.value)},g=I=>{m(I)},k=I=>{h(I)},D=()=>{if(C)return;n(),a({taskName:c,due:p,projectId:u})};return l(A,{children:[e(z,{placeholder:"Task name",value:c,onChange:x,ref:r}),l(P,{spacing:2,children:[e(ke,{onSelectDate:g,initialDate:o}),e(ye,{projectId:u!=null?u:"",onSelectProject:k})]}),l(P,{mt:2,ml:4,children:[e(v,{btnType:"primary",text:"Save",onClick:D,isDisabled:c===""}),e(v,{btnType:"secondary",text:"Cancel",onClick:n})]})]})},ee=({taskName:n,completed:t,id:o,due:a})=>{const s=ge(),{isOpen:r,onClose:c,onOpen:d}=T(),p=We(a);return l(Q,{as:"li",w:"full",borderBottom:"1px",borderColor:"gray.200",children:[!r&&l(y,{children:[e(zn,{isCompleted:t,onToggleCompleted:async()=>{try{await qe(o,{completed:!t})}catch(C){console.log(C)}}}),l(H,{alignItems:"flex-start",spacing:"0",py:4,children:[e(j,{textDecor:t?"line-through":"none",color:t?"gray.400":"black",children:n}),a&&e(j,{color:"teal",fontSize:"xs",children:p})]}),e(he,{})]}),!t&&!r&&e(On,{onDeleteTask:async()=>{await Zt(o)},onOpenEditor:d,taskName:n}),r&&e(An,{taskName:n,due:a,onCloseEditor:c,onUpdateTask:async C=>{try{await qe(o,C),s({description:"Project change successful!",status:"success",duration:5e3})}catch(x){console.log(x)}}})]})},Fn=()=>{const{tasks:n}=i.exports.useContext(b),o=n.filter(a=>a.completed===!1).filter(a=>a.projectId==="");return l(y,{children:[e(L,{title:"Inbox: Todoist Clone"}),e(X,{projectName:"Inbox",projectId:"",children:o.length===0?[]:o.map(a=>e(ee,{taskName:a.taskName,completed:a.completed,id:a.id,due:a.due},a.id))})]})},Nn=()=>{var p,m;const{projectId:n}=_(),{projects:t,tasks:o,showCompletedTasks:a}=i.exports.useContext(b),s=(m=(p=t.find(u=>u.id===n))==null?void 0:p.name)!=null?m:"",r=o.sort(u=>u.completed?1:-1),d=(a?r:o.filter(u=>u.completed===!1)).filter(u=>u.projectId===n);return l(y,{children:[e(L,{title:`${s}: Todoist Clone`}),e(X,{projectName:s,projectId:n!=null?n:"",children:d.length===0?[]:d.map(u=>e(ee,{id:u.id,completed:u.completed,taskName:u.taskName,due:u.due},u.id))})]})},En=()=>{const{tasks:n}=i.exports.useContext(b),t=new Date().toDateString(),o=n.filter(a=>a.due===t);return l(y,{children:[e(L,{title:"Today: Todoist Clone"}),e(X,{projectName:"Today",projectId:"",children:o.length===0?[]:o.map(a=>e(ee,{taskName:a.taskName,completed:a.completed,id:a.id,due:a.due},a.id))})]})},Ln=()=>{const{tasks:n}=i.exports.useContext(b),a=n.filter(s=>s.completed===!1).filter(s=>s.due!==""&&Z(s.due)!==Z(new Date().toDateString())).sort((s,r)=>Z(s.due)-Z(r.due));return l(y,{children:[e(L,{title:"Upcoming: Todoist Clone"}),e(X,{projectName:"Upcoming",projectId:"",children:a.length===0?[]:a.map(s=>e(ee,{taskName:s.taskName,completed:s.completed,id:s.id,due:s.due},s.id))})]})};function Bn(){return e($t,{theme:Wt,children:l(_t,{children:[l(F,{path:"/",element:e(kn,{redirectTo:"/login",children:e(xn,{})}),children:[e(F,{path:"app/inbox",element:e(Fn,{})}),e(F,{path:"app/today",element:e(En,{})}),e(F,{path:"app/upcoming",element:e(Ln,{})}),e(F,{path:"projects/:projectId",element:e(Nn,{})})]}),e(F,{path:"/login",element:e(yn,{})}),e(F,{path:"/signup",element:e(wn,{})})]})})}Vt.render(e(Gt.StrictMode,{children:e(Kt,{children:l(nn,{children:[e(Jt,{}),e(Bn,{})]})})}),document.getElementById("root"));
