var Ce=Object.defineProperty,ye=Object.defineProperties;var be=Object.getOwnPropertyDescriptors;var V=Object.getOwnPropertySymbols;var ve=Object.prototype.hasOwnProperty,ke=Object.prototype.propertyIsEnumerable;var U=(n,t,o)=>t in n?Ce(n,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[t]=o,k=(n,t)=>{for(var o in t||(t={}))ve.call(t,o)&&U(n,o,t[o]);if(V)for(var o of V(t))ke.call(t,o)&&U(n,o,t[o]);return n},S=(n,t)=>ye(n,be(t));import{i as Se,g as we,O as Pe,b as H,w as je,a as T,v as I,_ as W,m as q,c as K,r as i,o as Te,M as Y,B as G,y as J,j as e,s as Ie,d as De,e as _e,f as Ae,T as ze,h,u as D,k as l,P as Q,l as Z,F as B,n as X,p as ee,q as z,t as R,C as Oe,x as F,z as Le,A as Ee,D as Ne,E as te,G as ne,H as oe,I as se,J as ae,K as re,L as O,N as le,Q as _,R as M,S as L,U as He,V as Be,W as Re,X as Fe,Y as ie,Z as ce,$ as Me,a0 as $e,a1 as de,a2 as ue,a3 as E,a4 as pe,a5 as Ve,a6 as Ue,a7 as We,a8 as qe,a9 as Ke,aa as he,ab as Ye,ac as Ge,ad as Je,ae as Qe,af as Ze,ag as Xe,ah as et,ai as tt,aj as w,ak as nt,al as ot,am as st,an as at}from"./vendor.3fc7063a.js";const rt=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function o(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerpolicy&&(r.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?r.credentials="include":a.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(a){if(a.ep)return;a.ep=!0;const r=o(a);fetch(a.href,r)}};rt();const lt="modulepreload",me={},it="/",j=function(t,o){return!o||o.length===0?t():Promise.all(o.map(s=>{if(s=`${it}${s}`,s in me)return;me[s]=!0;const a=s.endsWith(".css"),r=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${r}`))return;const c=document.createElement("link");if(c.rel=a?"stylesheet":lt,a||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),a)return new Promise((u,m)=>{c.addEventListener("load",u),c.addEventListener("error",m)})})).then(()=>t())},ct={apiKey:"AIzaSyCPiNcvNkZJp9dPKs3B12--TcdLPICI5Wc",authDomain:"todoist-clone-a2075.firebaseapp.com",projectId:"todoist-clone-a2075",storageBucket:"todoist-clone-a2075.appspot.com",messagingSenderId:"897620374690",appId:"1:897620374690:web:6a7c290ec46fc18eb7d3fb"};Se(ct);const A=we(),y=Pe(),ge=H(y,"tasks"),fe=H(y,"projects");H(y,"users");const dt=async({taskName:n,projectId:t,userId:o,due:s})=>{await K(ge,{taskName:n,projectId:t,userId:o,due:s,completed:!1,timestamp:T()})},Ft=(n,t)=>W(I(y,"tasks",n),S(k({},t),{timestamp:T()})),Mt=n=>q(I(y,"tasks",n)),ut=async({name:n,userId:t,color:o})=>{await K(fe,{name:n,userId:t,color:o,timestamp:T()})},$t=(n,t)=>W(I(y,"projects",n),S(k({},t),{timestamp:T()})),Vt=n=>q(I(y,"projects",n)),Ut=(n,t)=>je(I(y,"users",n),S(k({},t),{createdAt:T()})),b=i.exports.createContext({user:null,projects:[],tasks:[],showCompletedTasks:!1,toggleCompletedTasks:()=>{}}),pt=({children:n})=>{const[t,o]=i.exports.useState(null),[s,a]=i.exports.useState([]),[r,c]=i.exports.useState([]),[u,m]=i.exports.useState(!1);i.exports.useEffect(()=>{const d=Te(A,p=>{o(p)});return()=>d()},[]),i.exports.useEffect(()=>{if(!t)return;const d=Y(ge,G("userId","==",`${t.uid}`)),p=J(d,C=>{const P=C.docs.map(f=>{if(!!f.exists)return S(k({},f.data()),{id:f.id})});c(P)});return()=>p()},[t]),i.exports.useEffect(()=>{if(!t)return;const d=Y(fe,G("userId","==",`${t.uid}`)),p=J(d,C=>{const P=C.docs.map(f=>{if(!!f.exists)return S(k({},f.data()),{id:f.id})});a(P.length===0?[]:P)});return()=>p()},[t]);const g={user:t,tasks:r,projects:s,showCompletedTasks:u,toggleCompletedTasks:()=>{m(!u)}};return e(b.Provider,{value:g,children:n})},Wt=(n,t)=>_e(A,n,t),qt=(n,t)=>Ie(A,n,t),Kt=()=>De(A),ht=()=>Ae(A),$=({children:n,tooltipLabel:t})=>e(ze,{label:t,children:n}),N=({btnType:n,text:t,isDisabled:o,onClick:s})=>e(h,S(k({},{bg:n==="primary"?"red.400":"gray.100",color:n==="primary"?"white":"black"}),{onClick:s,isDisabled:o,variant:n==="secondary"?"outline":"solid",size:"sm",children:t})),mt=({projectId:n,onSelectProject:t})=>{var g;const{projects:o}=i.exports.useContext(b),s=o.find(d=>d.id===n),[a,r]=i.exports.useState((g=s==null?void 0:s.name)!=null?g:""),{isOpen:c,onClose:u,onToggle:m}=D(),x=d=>{var p,C;u(),d.target instanceof HTMLButtonElement&&(r((p=d.target.dataset.name)!=null?p:""),t((C=d.target.dataset.id)!=null?C:""))};return l(Q,{isLazy:!0,closeOnBlur:!0,isOpen:c,onClose:u,children:[e(Z,{children:e(h,{leftIcon:a===""?e(B,{}):void 0,variant:"outline",size:"sm",onClick:m,children:a===""?"Inbox":a})}),e(X,{w:"max",_focus:{border:"1px",borderColor:"gray.300"},boxShadow:"md",children:l(ee,{display:"flex",flexDir:"column",children:[e(h,{leftIcon:e(B,{}),"data-id":"","data-name":"Inbox",onClick:x,variant:"ghost",size:"sm",justifyContent:"flex-start",children:"Inbox"}),o.map(d=>l(h,{"data-id":d.id,"data-name":d.name,onClick:x,variant:"ghost",size:"sm",justifyContent:"flex-start",children:[e(z,{as:"span",w:"7px",h:"7px",bg:d.color,borderRadius:"50%",mr:2}),d.name]},`${d.name}${Math.random()}`))]})})]})};const gt=({icon:n,onClick:t,text:o})=>e(h,{leftIcon:n,onClick:t,variant:"ghost",justifyContent:"flex-start",size:"sm",children:o}),xe=1e3*60*60*24,Yt=n=>new Date(n).getTime(),ft=n=>{let t;return typeof n=="string"&&(t=n),n instanceof Date&&(t=n.toDateString()),t===void 0?"":t===new Date(Date.now()-xe).toDateString()?"Yesterday":t===new Date().toDateString()?"Today":t===new Date(Date.now()+xe).toDateString()?"Tomorrow":t.split(" ").slice(1,3).join(" ")},xt=({onSelectDate:n,initialDate:t=""})=>{F(["bottom","left"]);const[o,s]=i.exports.useState(()=>t===""?null:new Date(t)),{isOpen:a,onClose:r,onToggle:c}=D(),u=ft(o!=null?o:""),m=g=>{r(),s(g),n(g.toDateString())},x=()=>{r(),s(null),n("")};return l(Q,{isLazy:!0,closeOnBlur:!0,placement:"auto-end",isOpen:a,onClose:r,children:[e(Z,{children:e(h,{leftIcon:e(Le,{}),variant:"outline",size:"sm",onClick:c,children:o===null?"Schedule":u})}),e(X,{w:"max",_focus:{border:"1px",borderColor:"gray.300"},boxShadow:"md",children:l(ee,{display:"flex",flexDir:"column",children:[e(Ct,{minDate:new Date,value:o,prev2Label:null,next2Label:null,onChange:m}),e(gt,{text:"No Date",onClick:x,icon:e(Ee,{})})]})})]})},Ct=R(Oe)`
  border: none;
  font-size: 0.8rem;
  width: 225px;
`,yt=({isOpen:n,onClose:t})=>{const o=F(["xs","md"]),{projectId:s}=Ne(),{user:a}=i.exports.useContext(b),[r,c]=i.exports.useState(""),[u,m]=i.exports.useState(""),[x,g]=i.exports.useState(s!=null?s:""),d=v=>{c(v.target.value)},p=()=>{t(),c("")},C=v=>{m(v)},P=v=>{g(v)},f=async()=>{t(),c("");try{await dt({taskName:r,projectId:x,userId:a.uid,due:u})}catch(v){console.log(v)}};return l(te,{isOpen:n,onClose:p,isCentered:!0,size:o,children:[e(ne,{}),l(oe,{children:[e(se,{children:"New Task"}),l(ae,{children:[e(re,{placeholder:"Task name",onChange:d,value:r,mb:4}),l(O,{spacing:2,children:[e(xt,{onSelectDate:C}),e(mt,{projectId:s!=null?s:"",onSelectProject:P})]})]}),e(le,{children:l(O,{spacing:4,children:[e(N,{btnType:"primary",text:"Add task",onClick:f,isDisabled:r===""}),e(N,{btnType:"secondary",text:"Cancel",onClick:p})]})})]})]})},bt=({onToggle:n,isSidebarOpen:t})=>{var u;const{isOpen:o,onOpen:s,onClose:a}=D(),{user:r}=i.exports.useContext(b);return l(_,{children:[o&&e(yt,{isOpen:o,onClose:a}),l(M,{as:"header",alignItems:"center",bg:"red.400",py:2,px:"2%",position:"absolute",zIndex:"100",width:"100%",children:[l(O,{variant:"ghost",children:[e($,{tooltipLabel:t?"Close menu":"Open menu",children:e(L,{"aria-label":"menu",icon:e(He,{}),color:"white",onClick:n})}),e($,{tooltipLabel:"Go to home",children:e(L,{"aria-label":"home",icon:e(Be,{}),color:"white",to:"/app/inbox",as:Re})})]}),e(Fe,{}),l(ie,{spacing:"4",children:[e($,{tooltipLabel:"Quick Add",children:e(L,{"aria-label":"plus",icon:e(ce,{}),variant:"ghost",color:"white",onClick:s})}),e(h,{onClick:async()=>{await ht()},size:"sm",children:"Logout"}),e(Me,{name:(u=r&&r.email)!=null?u:"",src:"no-link",_hover:{cursor:"pointer"}})]})]})]})},vt=["red","violet","teal","blue","lightblue","gray","salmon","yellow","orange","green","limegreen","skyblue","lavender","magenta"],kt=({onSelectColor:n,color:t})=>e($e,{onChange:s=>{n(s.target.value)},value:t,size:"sm",textTransform:"capitalize",children:vt.map(s=>e("option",{value:s,children:s},s))}),St=({isOpen:n,onClose:t})=>{const o=F(["xs","md"]),{user:s}=i.exports.useContext(b),[a,r]=i.exports.useState(""),[c,u]=i.exports.useState("gray");return l(te,{isOpen:n,onClose:t,isCentered:!0,size:o,children:[e(ne,{}),l(oe,{children:[e(se,{children:"Add project"}),l(ae,{children:[l(de,{mb:4,children:[e(ue,{children:"Name"}),e(re,{placeholder:"Project name",value:a,onChange:d=>{r(d.target.value)},size:"sm"})]}),l(de,{children:[e(ue,{children:"Color"}),e(kt,{onSelectColor:d=>{u(d)},color:c})]})]}),e(le,{children:l(O,{spacing:4,mt:4,children:[e(N,{btnType:"secondary",text:"Cancel",onClick:t}),e(N,{btnType:"primary",text:"Add",onClick:async()=>{t(),r("");try{await ut({name:a,userId:s.uid,color:c})}catch(d){console.log(d)}},isDisabled:a===""})]})})]})]})},wt=({id:n,projectName:t,projectColor:o})=>{const{tasks:s}=i.exports.useContext(b),a=s.filter(r=>r.projectId===n).reduce(r=>r+1,0);return e(ie,{as:"li",mb:1,children:l(h,{as:E,to:`/projects/${n}`,variant:"ghost",color:"black",width:"full",justifyContent:"flex-start",children:[e(z,{w:"10px",h:"10px",bg:o,borderRadius:"50%",mr:4}),e(pe,{isTruncated:!0,maxW:"15ch",fontSize:"sm",children:t}),e(z,{as:"span",ml:"auto",color:"gray.400",fontSize:"sm",children:a})]})})},Pt=()=>{const{projects:n}=i.exports.useContext(b),{isOpen:t,onOpen:o,onClose:s}=D(),a=n.length===0;return l(_,{children:[e(St,{isOpen:t,onClose:s}),e(Ve,{allowToggle:!0,w:"full",mt:4,children:l(Ue,{children:[e("h2",{children:l(We,{as:"div",children:[e(qe,{mr:"2"}),e(z,{flex:"1",textAlign:"left",fontWeight:"bold",children:"Projects"}),e(L,{icon:e(ce,{}),"aria-label":"plus",variant:"ghost",color:"gray.400",onClick:o})]})}),e(Ke,{pb:4,as:"ul",children:a?e(pe,{size:"sm",pl:4,children:"You have no project"}):n.map(r=>e(wt,{id:r.id,projectName:r.name,projectColor:r.color},r.id))})]})})]})},jt=({isOpen:n,onClose:t})=>l(_,{children:[n&&e(It,{onClick:t}),l(Tt,{isOpen:n,children:[l(he,{pl:4,children:[e(h,{leftIcon:e(B,{}),fontSize:"sm",as:E,to:"/app/inbox",variant:"ghost",width:"full",justifyContent:"flex-start",children:"Inbox"}),e(h,{leftIcon:e(Ye,{}),fontSize:"sm",as:E,to:"/app/today",variant:"ghost",width:"full",justifyContent:"flex-start",children:"Today"}),e(h,{leftIcon:e(Ge,{}),fontSize:"sm",as:E,to:"/app/upcoming",variant:"ghost",width:"full",justifyContent:"flex-start",children:"Upcoming"})]}),e(he,{children:e(Pt,{})})]})]}),Tt=R.div`
  height: 100vh;
  width: ${({isOpen:n})=>n?"300px":"0"};
  opacity: ${({isOpen:n})=>n?"1":"0"};
  background-color: #fafaf2;
  padding-top: 5rem;
  a {
    display: ${({isOpen:n})=>n?"flex":"none"};
  }
  .active {
    background-color: rgba(0, 0, 0, 0.05);
  }

  @media screen and (max-width: 769px) {
    position: absolute;
    z-index: 10;
  }
`,It=R.div`
  @media screen and (max-width: 769px) {
    position: fixed;
    inset: 0;
    z-index: 8;
    background-color: rgba(0, 0, 0, 0.25);
  }
`,Dt=({children:n})=>{const{isOpen:t,onToggle:o}=D();return l(_,{children:[e(bt,{onToggle:o,isSidebarOpen:t}),l(M,{width:"100vw",minH:"100vh",children:[e(jt,{isOpen:t,onClose:o}),e(M,{alignItems:"center",flexDir:"column",mx:"auto",width:"100%",children:e(Je,{})})]})]})},_t=({children:n,redirectTo:t})=>{const{user:o}=i.exports.useContext(b);return o?e(_,{children:n}):e(Qe,{to:t})},At=i.exports.lazy(()=>j(()=>import("./LoginFormik.68f0e7ed.js"),["assets/LoginFormik.68f0e7ed.js","assets/vendor.3fc7063a.js","assets/PageHelmet.cf62f30f.js","assets/FirebaseAuthError.ace3ff90.js"])),zt=i.exports.lazy(()=>j(()=>import("./SignupFormik.56d9092f.js"),["assets/SignupFormik.56d9092f.js","assets/vendor.3fc7063a.js","assets/FirebaseAuthError.ace3ff90.js","assets/PageHelmet.cf62f30f.js"])),Ot=i.exports.lazy(()=>j(()=>import("./Inbox.d25d60df.js"),["assets/Inbox.d25d60df.js","assets/vendor.3fc7063a.js","assets/TaskItem.a55c71ec.js","assets/PageHelmet.cf62f30f.js"])),Lt=i.exports.lazy(()=>j(()=>import("./Project.c7917ff1.js"),["assets/Project.c7917ff1.js","assets/vendor.3fc7063a.js","assets/TaskItem.a55c71ec.js","assets/PageHelmet.cf62f30f.js"])),Et=i.exports.lazy(()=>j(()=>import("./Today.76e0d0d0.js"),["assets/Today.76e0d0d0.js","assets/vendor.3fc7063a.js","assets/TaskItem.a55c71ec.js","assets/PageHelmet.cf62f30f.js"])),Nt=i.exports.lazy(()=>j(()=>import("./Upcoming.1fd019d5.js"),["assets/Upcoming.1fd019d5.js","assets/vendor.3fc7063a.js","assets/TaskItem.a55c71ec.js","assets/PageHelmet.cf62f30f.js"]));function Ht(){return e(Ze,{theme:Xe,children:e(i.exports.Suspense,{fallback:e(et,{position:"fixed",top:"50%",left:"50%"}),children:l(tt,{children:[l(w,{path:"/",element:e(_t,{redirectTo:"/login",children:e(Dt,{})}),children:[e(w,{path:"app/inbox",element:e(Ot,{})}),e(w,{path:"app/today",element:e(Et,{})}),e(w,{path:"app/upcoming",element:e(Nt,{})}),e(w,{path:"projects/:projectId",element:e(Lt,{})})]}),e(w,{path:"/login",element:e(At,{})}),e(w,{path:"/signup",element:e(zt,{})})]})})})}nt.render(e(ot.StrictMode,{children:e(st,{children:l(pt,{children:[e(at,{}),e(Ht,{})]})})}),document.getElementById("root"));export{N as A,xt as P,kt as S,b as T,Kt as a,Wt as b,Ut as c,mt as d,dt as e,gt as f,Vt as g,qt as h,ft as i,Ft as j,Mt as k,Yt as l,$t as u};
