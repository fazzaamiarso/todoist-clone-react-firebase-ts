var Ke=Object.defineProperty,Ge=Object.defineProperties;var Je=Object.getOwnPropertyDescriptors;var be=Object.getOwnPropertySymbols;var Ye=Object.prototype.hasOwnProperty,Qe=Object.prototype.propertyIsEnumerable;var ye=(n,t,o)=>t in n?Ke(n,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[t]=o,S=(n,t)=>{for(var o in t||(t={}))Ye.call(t,o)&&ye(n,o,t[o]);if(be)for(var o of be(t))Qe.call(t,o)&&ye(n,o,t[o]);return n},w=(n,t)=>Ge(n,Je(t));import{i as Ze,g as Xe,O as et,b as ee,w as tt,a as R,v as B,_ as ke,m as Se,c as we,r as i,o as nt,M as ve,B as Te,y as De,j as e,s as ot,d as at,e as st,f as rt,h as f,u as v,k as r,P as te,l as ne,F as oe,n as ae,p as se,q as M,t as re,C as lt,x as it,z as ct,A as $,D as le,E as _,G as ie,H as V,I as K,J as O,K as P,L as G,N as k,Q as ce,R as q,S as dt,T as ut,U as de,V as ue,W as J,X as pe,Y as pt,Z as ht,$ as F,a0 as U,a1 as Y,a2 as T,a3 as mt,a4 as gt,a5 as ft,a6 as Ct,a7 as xt,a8 as j,a9 as bt,aa as yt,ab as kt,ac as St,ad as wt,ae as vt,af as Tt,ag as Dt,ah as Ie,ai as z,aj as he,ak as me,al as ge,am as fe,an as Pe,ao as je,ap as He,aq as It,ar as Pt,as as jt,at as Ht,au as Ot,av as Ft,aw as Oe,ax as Fe,ay as At,az as zt,aA as Nt,aB as Et,aC as Lt,aD as Rt,aE as Bt,aF as Ae,aG as ze,aH as Mt,aI as qt,aJ as Ut,aK as A,aL as Wt,aM as $t,aN as _t,aO as Vt}from"./vendor.4b7f0ae0.js";const Kt=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function o(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerpolicy&&(l.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?l.credentials="include":a.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=o(a);fetch(a.href,l)}};Kt();const Gt={apiKey:"AIzaSyCPiNcvNkZJp9dPKs3B12--TcdLPICI5Wc",authDomain:"todoist-clone-a2075.firebaseapp.com",projectId:"todoist-clone-a2075",storageBucket:"todoist-clone-a2075.appspot.com",messagingSenderId:"897620374690",appId:"1:897620374690:web:6a7c290ec46fc18eb7d3fb"};Ze(Gt);const W=Xe(),H=et(),Ne=ee(H,"tasks"),Ee=ee(H,"projects");ee(H,"users");const Le=async({taskName:n,projectId:t,userId:o,due:s})=>{await we(Ne,{taskName:n,projectId:t,userId:o,due:s,completed:!1,timestamp:R()})},Re=(n,t)=>ke(B(H,"tasks",n),w(S({},t),{timestamp:R()})),Jt=n=>Se(B(H,"tasks",n)),Yt=async({name:n,userId:t,color:o})=>{await we(Ee,{name:n,userId:t,color:o,timestamp:R()})},Be=(n,t)=>ke(B(H,"projects",n),w(S({},t),{timestamp:R()})),Qt=n=>Se(B(H,"projects",n)),Zt=(n,t)=>tt(B(H,"users",n),w(S({},t),{createdAt:R()})),y=i.exports.createContext({user:null,projects:[],tasks:[],showCompletedTasks:!1,toggleCompletedTasks:()=>{}}),Xt=({children:n})=>{const[t,o]=i.exports.useState(null),[s,a]=i.exports.useState([]),[l,c]=i.exports.useState([]),[u,p]=i.exports.useState(!1);i.exports.useEffect(()=>{const m=nt(W,C=>{o(C)});return()=>m()},[]),i.exports.useEffect(()=>{if(!t)return;const m=ve(Ne,Te("userId","==",`${t.uid}`)),C=De(m,b=>{const g=b.docs.map(x=>{if(!!x.exists)return w(S({},x.data()),{id:x.id})});c(g)});return()=>C()},[t]),i.exports.useEffect(()=>{if(!t)return;const m=ve(Ee,Te("userId","==",`${t.uid}`)),C=De(m,b=>{const g=b.docs.map(x=>{if(!!x.exists)return w(S({},x.data()),{id:x.id})});a(g.length===0?[]:g)});return()=>C()},[t]);const d={user:t,tasks:l,projects:s,showCompletedTasks:u,toggleCompletedTasks:()=>{p(!u)}};return e(y.Provider,{value:d,children:n})},en=(n,t)=>st(W,n,t),tn=(n,t)=>ot(W,n,t),nn=()=>at(W),on=()=>rt(W),D=({btnType:n,text:t,isDisabled:o,onClick:s})=>e(f,w(S({},{bg:n==="primary"?"red.400":"gray.100",color:n==="primary"?"white":"black"}),{onClick:s,isDisabled:o,variant:n==="secondary"?"outline":"solid",size:"sm",children:t})),Ce=({projectId:n,onSelectProject:t})=>{var d;const{projects:o}=i.exports.useContext(y),s=o.find(m=>m.id===n),[a,l]=i.exports.useState((d=s==null?void 0:s.name)!=null?d:""),{isOpen:c,onClose:u,onToggle:p}=v(),h=m=>{var C,b;u(),m.target instanceof HTMLButtonElement&&(l((C=m.target.dataset.name)!=null?C:""),t((b=m.target.dataset.id)!=null?b:""))};return r(te,{isLazy:!0,closeOnBlur:!0,isOpen:c,onClose:u,children:[e(ne,{children:e(f,{leftIcon:a===""?e(oe,{}):void 0,variant:"outline",size:"sm",onClick:p,children:a===""?"Inbox":a})}),e(ae,{w:"max",_focus:{border:"1px",borderColor:"gray.300"},boxShadow:"md",children:r(se,{display:"flex",flexDir:"column",children:[e(f,{leftIcon:e(oe,{}),"data-id":"","data-name":"Inbox",onClick:h,variant:"ghost",size:"sm",justifyContent:"flex-start",children:"Inbox"}),o.map(m=>r(f,{"data-id":m.id,"data-name":m.name,onClick:h,variant:"ghost",size:"sm",justifyContent:"flex-start",children:[e(M,{as:"span",w:"7px",h:"7px",bg:m.color,borderRadius:"50%",mr:2}),m.name]},`${m.name}${Math.random()}`))]})})]})};const N=({icon:n,onClick:t,text:o})=>e(f,{leftIcon:n,onClick:t,variant:"ghost",justifyContent:"flex-start",size:"sm",children:o}),Me=1e3*60*60*24,Q=n=>new Date(n).getTime(),qe=n=>{let t;return typeof n=="string"&&(t=n),n instanceof Date&&(t=n.toDateString()),t===void 0?"":t===new Date(Date.now()-Me).toDateString()?"Yesterday":t===new Date().toDateString()?"Today":t===new Date(Date.now()+Me).toDateString()?"Tomorrow":t.split(" ").slice(1,3).join(" ")},xe=({onSelectDate:n,initialDate:t=""})=>{const[o,s]=i.exports.useState(()=>t===""?null:new Date(t)),{isOpen:a,onClose:l,onToggle:c}=v(),u=qe(o!=null?o:""),p=d=>{l(),s(d),n(d.toDateString())},h=()=>{l(),s(null),n("")};return r(te,{isLazy:!0,closeOnBlur:!0,placement:"left",isOpen:a,onClose:l,children:[e(ne,{children:e(f,{leftIcon:e(it,{}),variant:"outline",size:"sm",onClick:c,children:o===null?"Schedule":u})}),e(ae,{w:"max",_focus:{border:"1px",borderColor:"gray.300"},boxShadow:"md",children:r(se,{display:"flex",flexDir:"column",children:[e(an,{minDate:new Date,value:o,prev2Label:null,next2Label:null,onChange:p}),e(N,{text:"No Date",onClick:h,icon:e(ct,{})})]})})]})},an=re(lt)`
  border: none;
  font-size: 0.8rem;
  width: 225px;
`,sn=({isOpen:n,onClose:t})=>{const{projectId:o}=$(),{user:s}=i.exports.useContext(y),[a,l]=i.exports.useState(""),[c,u]=i.exports.useState(""),[p,h]=i.exports.useState(o!=null?o:""),d=x=>{l(x.target.value)},m=()=>{t(),l("")},C=x=>{u(x)},b=x=>{h(x)},g=async()=>{t(),l("");try{await Le({taskName:a,projectId:p,userId:s.uid,due:c})}catch(x){console.log(x)}};return r(le,{isOpen:n,onClose:m,isCentered:!0,children:[e(_,{}),r(ie,{children:[e(V,{children:"New Task"}),r(K,{children:[e(O,{placeholder:"Task name",onChange:d,value:a,mb:4}),r(P,{spacing:2,children:[e(xe,{onSelectDate:C}),e(Ce,{projectId:o!=null?o:"",onSelectProject:b})]})]}),e(G,{children:r(P,{spacing:4,children:[e(D,{btnType:"primary",text:"Add task",onClick:g,isDisabled:a===""}),e(D,{btnType:"secondary",text:"Cancel",onClick:m})]})})]})]})},rn=({onToggle:n})=>{var c;const{isOpen:t,onOpen:o,onClose:s}=v(),{user:a}=i.exports.useContext(y);return r(k,{children:[t&&e(sn,{isOpen:t,onClose:s}),r(ce,{as:"header",alignItems:"center",bg:"red.400",py:2,px:"2%",position:"absolute",zIndex:"100",width:"100%",children:[r(P,{variant:"ghost",children:[e(q,{"aria-label":"menu",icon:e(dt,{}),color:"white",onClick:n}),e(q,{"aria-label":"home",icon:e(ut,{}),color:"white",to:"/app/inbox",as:de})]}),e(ue,{}),r(J,{spacing:"4",children:[e(q,{"aria-label":"plus",icon:e(pe,{}),variant:"ghost",color:"white",onClick:o}),e(f,{onClick:async()=>{await on()},size:"sm",children:"Logout"}),e(pt,{name:(c=a&&a.email)!=null?c:"",src:"no-link",_hover:{cursor:"pointer"}})]})]})]})},ln=["red","violet","teal","blue","lightblue","gray","salmon","yellow","orange","green","limegreen","skyblue","lavender","magenta"],Ue=({onSelectColor:n,color:t})=>e(ht,{onChange:s=>{n(s.target.value)},value:t,size:"sm",textTransform:"capitalize",children:ln.map(s=>e("option",{value:s,children:s},s))}),cn=({isOpen:n,onClose:t})=>{const{user:o}=i.exports.useContext(y),[s,a]=i.exports.useState(""),[l,c]=i.exports.useState("gray");return r(le,{isOpen:n,onClose:t,isCentered:!0,children:[e(_,{}),r(ie,{children:[e(V,{children:"Add project"}),r(K,{children:[r(F,{mb:4,children:[e(U,{children:"Name"}),e(O,{placeholder:"Project name",value:s,onChange:d=>{a(d.target.value)},size:"sm"})]}),r(F,{children:[e(U,{children:"Color"}),e(Ue,{onSelectColor:d=>{c(d)},color:l})]})]}),e(G,{children:r(P,{spacing:4,mt:4,children:[e(D,{btnType:"secondary",text:"Cancel",onClick:t}),e(D,{btnType:"primary",text:"Add",onClick:async()=>{t(),a("");try{await Yt({name:s,userId:o.uid,color:l})}catch(d){console.log(d)}},isDisabled:s===""})]})})]})]})},dn=({id:n,projectName:t,projectColor:o})=>{const{tasks:s}=i.exports.useContext(y),a=s.filter(l=>l.projectId===n).reduce(l=>l+1,0);return e(J,{as:"li",mb:1,children:r(f,{as:Y,to:`/projects/${n}`,variant:"ghost",color:"black",width:"full",justifyContent:"flex-start",children:[e(M,{w:"10px",h:"10px",bg:o,borderRadius:"50%",mr:4}),e(T,{isTruncated:!0,maxW:"15ch",fontSize:"sm",children:t}),e(M,{as:"span",ml:"auto",color:"gray.400",fontSize:"sm",children:a})]})})},un=()=>{const{projects:n}=i.exports.useContext(y),{isOpen:t,onOpen:o,onClose:s}=v(),a=n.length===0;return r(k,{children:[e(cn,{isOpen:t,onClose:s}),e(mt,{allowToggle:!0,w:"full",mt:4,children:r(gt,{children:[e("h2",{children:r(ft,{as:"div",children:[e(Ct,{mr:"2"}),e(M,{flex:"1",textAlign:"left",fontWeight:"bold",children:"Projects"}),e(q,{icon:e(pe,{}),"aria-label":"plus",variant:"ghost",color:"gray.400",onClick:o})]})}),e(xt,{pb:4,as:"ul",children:a?e(T,{size:"sm",children:"You have no project"}):n.map(l=>e(dn,{id:l.id,projectName:l.name,projectColor:l.color},l.id))})]})})]})},pn=({isOpen:n})=>r(k,{children:[n&&e(mn,{}),r(hn,{isOpen:n,children:[r(j,{pl:4,children:[e(f,{leftIcon:e(oe,{}),fontSize:"sm",as:Y,to:"/app/inbox",variant:"ghost",width:"full",justifyContent:"flex-start",children:"Inbox"}),e(f,{leftIcon:e(bt,{}),fontSize:"sm",as:Y,to:"/app/today",variant:"ghost",width:"full",justifyContent:"flex-start",children:"Today"}),e(f,{leftIcon:e(yt,{}),fontSize:"sm",as:Y,to:"/app/upcoming",variant:"ghost",width:"full",justifyContent:"flex-start",children:"Upcoming"})]}),e(j,{children:e(un,{})})]})]}),hn=re.div`
  height: 100vh;
  width: ${({isOpen:n})=>n?"300px":"0"};
  opacity: ${({isOpen:n})=>n?"1":"0"};
  background-color: #fafaf2;
  padding-top: 5rem;
  .active {
    background-color: rgba(0, 0, 0, 0.05);
  }

  @media screen and (max-width: 769px) {
    position: absolute;
    z-index: 10;
  }
`,mn=re.div`
  @media screen and (max-width: 769px) {
    position: fixed;
    inset: 0;
    z-index: 8;
    background-color: rgba(0, 0, 0, 0.25);
  }
`,gn=({children:n})=>{const{isOpen:t,onToggle:o}=v();return r(k,{children:[e(rn,{onToggle:o}),r(ce,{width:"100vw",minH:"100vh",children:[e(pn,{isOpen:t}),e(ce,{alignItems:"center",flexDir:"column",mx:"auto",width:"100%",children:e(kt,{})})]})]})},E=({title:n})=>e(St,{children:e("title",{children:n})}),L=({label:n,name:t,placeholder:o,type:s})=>{const{isOpen:a,onToggle:l}=v(),c=()=>l();return e(wt,{name:t,children:({field:u,form:p,meta:h})=>r(F,{isInvalid:!!h.error&&!!h.touched,isRequired:!0,children:[e(U,{htmlFor:t,children:n}),s==="password"?r(vt,{children:[e(O,w(S({},u),{id:t,placeholder:o,type:a?"text":"password"})),e(Tt,{width:"4.5rem",children:e(f,{h:"1.75rem",size:"sm",onClick:c,variant:"ghost",children:a?"Hide":"Show"})})]}):e(O,w(S({},u),{id:t,placeholder:o,type:s})),e(Dt,{children:h.error})]})})},We=n=>{const t=n.slice(5).replaceAll("-"," ");return t.replace(t[0],t[0].toUpperCase())},fn=Ie({password:z().required("Required"),email:z().email("Invalid email address").required("Required")}),Cn=()=>{const n=he();let t=me();const o={email:"",password:""},s=async({email:l,password:c})=>{try{await tn(l,c),t("/app/inbox",{replace:!0})}catch(u){const p=We(u.code);n({description:p,status:"error",duration:9e3,isClosable:!0})}},a=async()=>{try{await nn(),t("/app/inbox",{replace:!0})}catch(l){alert(l)}};return r(k,{children:[e(E,{title:"Todoist Clone Firebase"}),r(ge,{centerContent:!0,display:"flex",alignItems:"center",minH:"100vh",py:100,children:[e(fe,{as:"h2",children:"Login"}),e(Pe,{initialValues:o,onSubmit:s,validationSchema:fn,children:l=>r(j,{as:je,children:[e(L,{name:"email",label:"Email",placeholder:"example@email.com",type:"email"}),e(L,{name:"password",label:"Password",placeholder:"",type:"password"}),r(T,{pb:4,children:["Don't have an account?",e(He,{as:de,to:"/signup",color:"blue",fontWeight:"500",ml:4,children:"Sign up here"})]}),r(j,{w:"full",children:[e(f,{type:"submit",isLoading:l.isSubmitting,isFullWidth:!0,colorScheme:"blue",children:"Log in"}),e(T,{fontWeight:"bold",children:"OR"}),e(f,{isLoading:l.isSubmitting,isFullWidth:!0,onClick:a,variant:"outline",children:"Log in Anonymously"})]}),r(T,{fontSize:"xs",position:"fixed",bottom:"4",right:"100px",children:["Todoist Clone by Fazza Amiarso"," "]})]})})]})]})},xn=({children:n,redirectTo:t})=>{const{user:o}=i.exports.useContext(y);return o?e(k,{children:n}):e(It,{to:t})},bn=Ie({password:z().min(6,"Password at least 6 characters").required("Required"),email:z().email("Invalid email address").required("Required"),firstName:z().max(15).required("Required"),lastName:z().max(15).required("Required")}),yn=()=>{const n=he();let t=me();return r(k,{children:[e(E,{title:"Todoist Clone Firebase"}),r(ge,{centerContent:!0,display:"flex",alignItems:"center",justifyContent:"center",minH:"100vh",py:2,pb:32,children:[e(fe,{as:"h2",pb:"8",children:"Signup"}),e(Pe,{initialValues:{email:"",password:"",firstName:"",lastName:""},onSubmit:async({email:a,password:l,firstName:c,lastName:u})=>{try{const p=await en(a,l);p.user.isAnonymous||await Zt(p.user.uid,{email:a,firstName:c,lastName:u,id:p.user.uid}),t("/app/inbox",{replace:!0}),n({description:`Welcome aboard ${c}!`,status:"info",duration:9e3,isClosable:!0})}catch(p){const h=We(p.code);n({description:h,status:"error",duration:9e3,isClosable:!0})}},validationSchema:bn,children:a=>r(j,{as:je,spacing:4,children:[e(L,{name:"firstName",label:"First Name",placeholder:"John",type:"text"}),e(L,{name:"lastName",label:"Last Name",placeholder:"Doe",type:"text"}),e(L,{name:"email",label:"Email",placeholder:"example@email.com",type:"email"}),e(L,{name:"password",label:"Password",placeholder:"",type:"password"}),r(T,{children:["Already have an account?",e(He,{as:de,to:"/login",color:"blue",fontWeight:"500",ml:4,children:"Login here"})]}),e(j,{w:"full",pt:4,children:e(f,{type:"submit",isLoading:a.isSubmitting,isFullWidth:!0,colorScheme:"blue",children:"Signup"})}),r(T,{fontSize:"xs",position:"fixed",bottom:"4",children:["Todoist Clone by Fazza Amiarso"," "]})]})})]})]})},kn=({onCloseEditor:n})=>{const{projectId:t}=$(),{user:o}=i.exports.useContext(y),[s,a]=i.exports.useState(""),[l,c]=i.exports.useState(""),[u,p]=i.exports.useState(t!=null?t:""),h=i.exports.useRef(null);i.exports.useEffect(()=>{var g;(g=h.current)==null||g.focus()},[]);const d=g=>{a(g.target.value)},m=g=>{c(g)},C=g=>{p(g)},b=async()=>{try{await Le({taskName:s,projectId:u,userId:o.uid,due:l})}catch(g){console.log(g)}a("")};return r(F,{mt:2,children:[e(O,{placeholder:"Task name",value:s,onChange:d,ref:h}),r(P,{spacing:2,children:[e(xe,{onSelectDate:m}),e(Ce,{projectId:u!=null?u:"",onSelectProject:C})]}),r(P,{mt:2,ml:4,spacing:2,children:[e(D,{btnType:"primary",text:"Add task",onClick:b,isDisabled:s===""}),e(D,{btnType:"secondary",text:"Cancel",onClick:n})]})]})},Sn=()=>{const{isOpen:n,onOpen:t,onClose:o}=v();return n?e(kn,{onCloseEditor:o}):e(f,{variant:"ghost",isFullWidth:!0,leftIcon:e(pe,{}),color:"gray.400",justifyContent:"flex-start",_hover:{color:"red.400"},onClick:t,children:"Add task"})},wn=({isOpen:n,onClose:t,onUpdateProject:o,projectId:s})=>{const{projects:a}=i.exports.useContext(y),l=a.find(g=>g.id===s),[c,u]=i.exports.useState(l.name),[p,h]=i.exports.useState(l.color),d=c===(l==null?void 0:l.name)&&p===(l==null?void 0:l.color);return r(le,{isOpen:n,onClose:t,isCentered:!0,children:[e(_,{}),r(ie,{children:[e(V,{children:"Edit project"}),r(K,{children:[r(F,{children:[e(U,{children:"Name"}),e(O,{placeholder:"Project name",value:c,onChange:g=>{u(g.target.value)}})]}),r(F,{children:[e(U,{children:"Color"}),e(Ue,{onSelectColor:g=>{h(g)},color:p})]})]}),r(G,{children:[e(D,{btnType:"secondary",text:"Cancel",onClick:t}),e(D,{btnType:"primary",text:"Save",onClick:()=>{t(),!d&&o({name:c,color:p})},isDisabled:c===""})]})]})]})},$e=({children:n})=>r(te,{isLazy:!0,closeOnBlur:!0,children:[e(ne,{children:e(q,{icon:e(Pt,{}),"aria-label":"popover trigger",variant:"ghost"})}),e(ae,{w:"max",_focus:{border:"1px",borderColor:"gray.300"},boxShadow:"md",children:e(se,{display:"flex",flexDir:"column",children:n})})]}),_e=({onCloseDialog:n,isDialogOpen:t,onDeleteAction:o,deletedItemName:s})=>{const a=i.exports.useRef(null);return e(jt,{isOpen:t,leastDestructiveRef:a,onClose:n,isCentered:!0,children:e(_,{children:r(Ht,{children:[e(V,{children:e(Ot,{fontSize:"xl",children:e(Ft,{})})}),r(K,{children:["Are you sure you want to delete"," ",e(T,{fontWeight:"bold",as:"span",children:s}),"?"]}),r(G,{children:[e(f,{ref:a,onClick:n,variant:"outline",size:"sm",children:"Cancel"}),e(f,{colorScheme:"red",onClick:o,ml:3,size:"sm",children:"Delete"})]})]})})})},vn=({onDeleteProject:n,onOpenEditor:t,projectName:o})=>{const{showCompletedTasks:s,toggleCompletedTasks:a}=i.exports.useContext(y),{isOpen:l,onOpen:c,onClose:u}=v();return r(k,{children:[r($e,{children:[e(N,{icon:e(Oe,{}),text:"Edit project",onClick:t}),e(N,{icon:e(Fe,{}),text:"Delete project",onClick:c}),e(N,{icon:s?e(At,{}):e(zt,{}),text:s?"Hide completed tasks":"Show completed tasks",onClick:()=>{a()}})]}),e(_e,{isDialogOpen:l,onCloseDialog:u,onDeleteAction:n,deletedItemName:o})]})},Tn=()=>{const{isEditing:n,getSubmitButtonProps:t,getCancelButtonProps:o}=Bt();return n?r(P,{children:[e(f,w(S({},t()),{color:"white",bg:"red.400",size:"sm",children:"Save"})),r(f,w(S({},o()),{variant:"ghost",size:"sm",children:["Cancel"," "]}))]}):null},Dn=({initialValue:n,onChangeTitle:t})=>{let o=Nt();const[s,a]=i.exports.useState(n);return i.exports.useEffect(()=>{a(n)},[o]),r(Et,{value:s,isPreviewFocusable:!0,submitOnBlur:!1,selectAllOnFocus:!1,onSubmit:u=>{u!==n&&t(u)},onChange:u=>{a(u)},fontSize:"xl",fontWeight:"bold",mb:4,children:[e(Lt,{_hover:{background:"gray.300"}}),e(Rt,{mb:2}),e(Tn,{})]})},In=({projectName:n,projectId:t})=>{let o=me();const{isOpen:s,onOpen:a,onClose:l}=v();return r(J,{as:"header",children:[t===""?e(fe,{fontSize:"xl",mb:4,children:n}):e(Dn,{initialValue:n,onChangeTitle:async h=>{await Be(t,{name:h})}}),e(ue,{}),t!==""&&e(vn,{onDeleteProject:async()=>{o("/app/inbox"),await Qt(t)},onOpenEditor:a,projectName:n}),t!==""&&s&&e(wn,{isOpen:s,projectName:n,projectId:t,onClose:l,onUpdateProject:async h=>{l(),await Be(t,h)}})]})},Z=({children:n,projectName:t,projectId:o})=>r(ge,{maxW:"3xl",w:"85%",mt:"5.5rem",children:[e(In,{projectName:t,projectId:o}),e(j,{as:"ul",alignItems:"flex-start",children:n}),e(Sn,{})]}),Pn=({taskName:n,onDeleteTask:t,onOpenEditor:o})=>{const{isOpen:s,onOpen:a,onClose:l}=v();return r(k,{children:[r($e,{children:[e(N,{icon:e(Oe,{}),text:"Edit task",onClick:o}),e(N,{icon:e(Fe,{}),text:"Delete task",onClick:a})]}),e(_e,{isDialogOpen:s,onCloseDialog:l,onDeleteAction:t,deletedItemName:n})]})},jn=({isCompleted:n,onToggleCompleted:t})=>r(M,{border:n?"none":"1px",borderColor:"gray.400",borderRadius:"50%",w:"20px",h:"20px",cursor:"pointer",mr:"2",onClick:t,children:[!n&&e(Ae,{as:ze,w:"20px",h:"20px",opacity:0,_hover:{opacity:".3",transition:"opacity .25s"}}),n&&e(Ae,{as:ze,w:"20px",h:"20px",color:"gray.500"})]}),Hn=({onCloseEditor:n,taskName:t,due:o,onUpdateTask:s})=>{const{projectId:a}=$(),l=i.exports.useRef(null),[c,u]=i.exports.useState(t),[p,h]=i.exports.useState(o),[d,m]=i.exports.useState(a!=null?a:""),C=c===t&&p===o&&d===a;i.exports.useEffect(()=>{var I;(I=l.current)==null||I.focus()},[]);const b=I=>{u(I.target.value)},g=I=>{h(I)},x=I=>{m(I)},Ve=()=>{if(C)return;n(),s({taskName:c,due:p,projectId:d})};return r(F,{children:[e(O,{placeholder:"Task name",value:c,onChange:b,ref:l}),r(P,{spacing:2,children:[e(xe,{onSelectDate:g,initialDate:o}),e(Ce,{projectId:d!=null?d:"",onSelectProject:x})]}),r(P,{mt:2,ml:4,children:[e(D,{btnType:"primary",text:"Save",onClick:Ve,isDisabled:c===""}),e(D,{btnType:"secondary",text:"Cancel",onClick:n})]})]})},X=({taskName:n,completed:t,id:o,due:s})=>{const a=he(),{isOpen:l,onClose:c,onOpen:u}=v(),p=qe(s);return r(J,{as:"li",w:"full",borderBottom:"1px",borderColor:"gray.200",children:[!l&&r(k,{children:[e(jn,{isCompleted:t,onToggleCompleted:async()=>{try{await Re(o,{completed:!t})}catch(C){console.log(C)}}}),r(j,{alignItems:"flex-start",spacing:"0",py:4,children:[e(T,{textDecor:t?"line-through":"none",color:t?"gray.400":"black",children:n}),s&&e(T,{color:"teal",fontSize:"xs",children:p})]}),e(ue,{})]}),!t&&!l&&e(Pn,{onDeleteTask:async()=>{await Jt(o)},onOpenEditor:u,taskName:n}),l&&e(Hn,{taskName:n,due:s,onCloseEditor:c,onUpdateTask:async C=>{try{await Re(o,C),a({description:"Project change successful!",status:"success",duration:5e3})}catch(b){console.log(b)}}})]})},On=()=>{const{tasks:n}=i.exports.useContext(y),o=n.filter(s=>s.completed===!1).filter(s=>s.projectId==="");return r(k,{children:[e(E,{title:"Inbox: Todoist Clone"}),e(Z,{projectName:"Inbox",projectId:"",children:o.length===0?[]:o.map(s=>e(X,{taskName:s.taskName,completed:s.completed,id:s.id,due:s.due},s.id))})]})},Fn=()=>{var p,h;const{projectId:n}=$(),{projects:t,tasks:o,showCompletedTasks:s}=i.exports.useContext(y),a=(h=(p=t.find(d=>d.id===n))==null?void 0:p.name)!=null?h:"",l=o.sort(d=>d.completed?1:-1),u=(s?l:o.filter(d=>d.completed===!1)).filter(d=>d.projectId===n);return r(k,{children:[e(E,{title:`${a}: Todoist Clone`}),e(Z,{projectName:a,projectId:n!=null?n:"",children:u.length===0?[]:u.map(d=>e(X,{id:d.id,completed:d.completed,taskName:d.taskName,due:d.due},d.id))})]})},An=()=>{const{tasks:n}=i.exports.useContext(y),t=new Date().toDateString(),o=n.filter(s=>s.due===t);return r(k,{children:[e(E,{title:"Today: Todoist Clone"}),e(Z,{projectName:"Today",projectId:"",children:o.length===0?[]:o.map(s=>e(X,{taskName:s.taskName,completed:s.completed,id:s.id,due:s.due},s.id))})]})},zn=()=>{const{tasks:n}=i.exports.useContext(y),s=n.filter(a=>a.completed===!1).filter(a=>a.due!==""&&Q(a.due)!==Q(new Date().toDateString())).sort((a,l)=>Q(a.due)-Q(l.due));return r(k,{children:[e(E,{title:"Upcoming: Todoist Clone"}),e(Z,{projectName:"Upcoming",projectId:"",children:s.length===0?[]:s.map(a=>e(X,{taskName:a.taskName,completed:a.completed,id:a.id,due:a.due},a.id))})]})};function Nn(){return e(Mt,{theme:qt,children:r(Ut,{children:[r(A,{path:"/",element:e(xn,{redirectTo:"/login",children:e(gn,{})}),children:[e(A,{path:"app/inbox",element:e(On,{})}),e(A,{path:"app/today",element:e(An,{})}),e(A,{path:"app/upcoming",element:e(zn,{})}),e(A,{path:"projects/:projectId",element:e(Fn,{})})]}),e(A,{path:"/login",element:e(Cn,{})}),e(A,{path:"/signup",element:e(yn,{})})]})})}Wt.render(e($t.StrictMode,{children:e(_t,{children:r(Xt,{children:[e(Vt,{}),e(Nn,{})]})})}),document.getElementById("root"));
