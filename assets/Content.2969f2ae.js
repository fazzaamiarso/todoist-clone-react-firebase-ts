var W=Object.defineProperty;var Y=(t,o,n)=>o in t?W(t,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[o]=n;var A=(t,o,n)=>(Y(t,typeof o!="symbol"?o+"":o,n),n);import{j as e,aE as _,q as H,x as q,r as l,e as a,E as z,G as F,H as O,J as N,K as D,I as B,A as g,Q as M,u as k,F as x,aF as y,R as C,aG as X,aH as Z,as as L,aa as ee,a8 as E,D as $,d as p,aI as te,ab as oe,Y as j,z as G,L as Q,aJ as b,n as v,aK as ae,aL as ne,aM as re,aN as se,aO as ce,p as R,ac as J,h as le,aP as ie,aQ as de,aR as he}from"./vendor.f24883fb.js";import{T as m,c as ue,d as pe,A as f,e as me,S as ge,f as xe}from"./index.940a39a8.js";import{c as Ce}from"./firebaseAuth.d6a38ea5.js";const w=({children:t,tooltipLabel:o})=>e(_,{label:o,children:t}),be=({isOpen:t,onClose:o})=>{const n=H(["xs","md"]),{projectId:s}=q(),{user:c}=l.exports.useContext(m),[r,i]=l.exports.useState(""),[u,S]=l.exports.useState(""),[T,I]=l.exports.useState(s!=null?s:""),d=h=>{i(h.target.value)},P=()=>{o(),i("")},K=h=>{S(h)},U=h=>{I(h)},V=async()=>{o(),i("");try{await me({taskName:r,projectId:T,userId:c.uid,due:u})}catch(h){console.log(h)}};return a(z,{isOpen:t,onClose:P,isCentered:!0,size:n,children:[e(F,{}),a(O,{children:[e(N,{children:"New Task"}),a(D,{children:[e(B,{placeholder:"Task name",onChange:d,value:r,mb:4}),a(g,{spacing:2,children:[e(ue,{onSelectDate:K}),e(pe,{projectId:s!=null?s:"",onSelectProject:U})]})]}),e(M,{children:a(g,{spacing:4,children:[e(f,{btnType:"primary",text:"Add task",onClick:V,isDisabled:r===""}),e(f,{btnType:"secondary",text:"Cancel",onClick:P})]})})]})]})},fe=({onToggle:t,isSidebarOpen:o})=>{var u;const{isOpen:n,onOpen:s,onClose:c}=k(),{user:r}=l.exports.useContext(m);return a(x,{children:[n&&e(be,{isOpen:n,onClose:c}),a(y,{as:"header",alignItems:"center",bg:"red.400",py:2,px:"2%",position:"absolute",zIndex:"100",width:"100%",children:[a(g,{variant:"ghost",children:[e(w,{tooltipLabel:o?"Close menu":"Open menu",children:e(C,{"aria-label":"menu",icon:e(X,{}),color:"white",onClick:t})}),e(w,{tooltipLabel:"Go to home",children:e(C,{"aria-label":"home",icon:e(Z,{}),color:"white",to:"/app/inbox",as:L})})]}),e(ee,{}),a(E,{spacing:"4",children:[e(w,{tooltipLabel:"Quick Add",children:e(C,{"aria-label":"plus",icon:e($,{}),variant:"ghost",color:"white",onClick:s})}),e(p,{onClick:async()=>{await Ce()},size:"sm",children:"Logout"}),e(te,{name:(u=r&&r.displayName)!=null?u:"",src:"no-link",_hover:{cursor:"pointer"}})]})]})]})};class ke extends l.exports.Component{constructor(){super(...arguments);A(this,"state",{hasError:!1})}static getDerivedStateFromError(o){return{hasError:!0}}componentDidCatch(o,n){console.error("Uncaught error:",o,n)}render(){return this.state.hasError?a(oe,{centerContent:!0,top:"50%",children:[e(j,{children:"Ooops... There is something wrong"}),e(L,{to:"/app/inbox",children:"Go back to home"})]}):this.props.children}}const ye=({isOpen:t,onClose:o})=>{const n=H(["xs","md"]),{user:s}=l.exports.useContext(m),[c,r]=l.exports.useState(""),[i,u]=l.exports.useState("gray");return a(z,{isOpen:t,onClose:o,isCentered:!0,size:n,children:[e(F,{}),a(O,{children:[e(N,{children:"Add project"}),a(D,{children:[a(G,{mb:4,children:[e(Q,{children:"Name"}),e(B,{placeholder:"Project name",value:c,onChange:d=>{r(d.target.value)},size:"sm"})]}),a(G,{children:[e(Q,{children:"Color"}),e(ge,{onSelectColor:d=>{u(d)},color:i})]})]}),e(M,{children:a(g,{spacing:4,mt:4,children:[e(f,{btnType:"secondary",text:"Cancel",onClick:o}),e(f,{btnType:"primary",text:"Add",onClick:async()=>{o(),r("");try{await xe({name:c,userId:s.uid,color:i})}catch(d){console.log(d)}},isDisabled:c===""})]})})]})]})},je=({id:t,projectName:o,projectColor:n})=>{const{tasks:s}=l.exports.useContext(m),c=s.filter(r=>r.projectId===t).reduce(r=>r+1,0);return e(E,{as:"li",mb:1,children:a(p,{as:b,to:`/projects/${t}`,variant:"ghost",color:"black",width:"full",justifyContent:"flex-start",children:[e(v,{w:"10px",h:"10px",bg:n,borderRadius:"50%",mr:4}),e(j,{isTruncated:!0,maxW:"15ch",fontSize:"sm",children:o}),e(v,{as:"span",ml:"auto",color:"gray.400",fontSize:"sm",children:c})]})})},ve=()=>{const{projects:t}=l.exports.useContext(m),{isOpen:o,onOpen:n,onClose:s}=k(),c=t.length===0;return a(x,{children:[e(ye,{isOpen:o,onClose:s}),e(ae,{allowToggle:!0,w:"full",mt:4,children:a(ne,{children:[e("h2",{children:a(re,{as:"div",children:[e(se,{mr:"2"}),e(v,{flex:"1",textAlign:"left",fontWeight:"bold",children:"Projects"}),e(C,{icon:e($,{}),"aria-label":"plus",variant:"ghost",color:"gray.400",onClick:n})]})}),e(ce,{pb:4,as:"ul",children:c?e(j,{size:"sm",pl:4,children:"You have no project"}):t.map(r=>e(je,{id:r.id,projectName:r.name,projectColor:r.color},r.id))})]})})]})},we=({isOpen:t,onClose:o})=>a(x,{children:[t&&e(Te,{onClick:o}),a(Se,{isOpen:t,children:[a(J,{pl:4,children:[e(p,{leftIcon:e(le,{}),fontSize:"sm",as:b,to:"/app/inbox",variant:"ghost",width:"full",justifyContent:"flex-start",children:"Inbox"}),e(p,{leftIcon:e(ie,{}),fontSize:"sm",as:b,to:"/app/today",variant:"ghost",width:"full",justifyContent:"flex-start",children:"Today"}),e(p,{leftIcon:e(de,{}),fontSize:"sm",as:b,to:"/app/upcoming",variant:"ghost",width:"full",justifyContent:"flex-start",children:"Upcoming"})]}),e(J,{children:e(ve,{})})]})]}),Se=R.div`
  height: 100vh;
  width: ${({isOpen:t})=>t?"300px":"0"};
  opacity: ${({isOpen:t})=>t?"1":"0"};
  background-color: #fafaf2;
  padding-top: 5rem;
  a {
    display: ${({isOpen:t})=>t?"flex":"none"};
  }
  .active {
    background-color: rgba(0, 0, 0, 0.05);
  }

  @media screen and (max-width: 769px) {
    position: absolute;
    z-index: 10;
  }
`,Te=R.div`
  @media screen and (max-width: 769px) {
    position: fixed;
    inset: 0;
    z-index: 8;
    background-color: rgba(0, 0, 0, 0.25);
  }
`,ze=({children:t})=>{const{isOpen:o,onToggle:n}=k();return a(x,{children:[e(fe,{onToggle:n,isSidebarOpen:o}),a(y,{width:"100vw",minH:"100vh",children:[e(we,{isOpen:o,onClose:n}),e(y,{alignItems:"center",flexDir:"column",mx:"auto",width:"100%",children:e(ke,{children:e(he,{})})})]})]})};export{ze as default};
